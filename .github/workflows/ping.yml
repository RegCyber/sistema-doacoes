name: Ping Streamlit App

on:
  schedule:
    - cron: '0 */6 * * *'   # Executa a cada 6 horas
  workflow_dispatch:         # Permite rodar manualmente pelo botão "Run workflow"

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Testar acesso ao app
        run: |
          echo "Acessando o app em $(date)"
          STATUS=$(curl -s -L --max-redirs 100 --max-time 60 -o /dev/null -w "%{http_code}" https://seu-app.streamlit.app)
          echo "Status HTTP: $STATUS"
          if [ "$STATUS" -ne 200 ]; then
            echo "⚠️ O app não respondeu corretamente! (Status $STATUS)"
            exit 1
          else
            echo "✅ O app está online."
          fi
